<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Maps 擗輒閰? AI ????/title>
    <meta name="description" content="鞎澆 Google Maps 擗輒???, AI ?芸???閰?, ?刻?銝?桐???>
    <meta name="theme-color" content="#ffffff">

    <!-- PWA -->
    <link rel="manifest" href="/manifest.json?v=20260228">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>?儭?/text></svg>">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/static/css/style.css?v=20260228">

    <!-- Critical inline styles as fallback while CSS loads -->
    <style>
        .hidden { display: none !important; }
        body { font-family: 'Noto Sans TC', sans-serif; margin: 0; padding: 0; }
    </style>
</head>
<body>

<!-- ====== HERO / INPUT ====== -->
<header class="hero">
    <div class="hero-bg"></div>
    <div class="container">
        <!-- Dark Mode Toggle -->
        <button class="dark-mode-toggle" id="darkModeToggle" title="??瘛梯璅∪?">??</button>

        <h1 class="hero-title">
            <span class="icon-plate">?儭?/span>
            Google Maps 擗輒閰?<br><span class="highlight">AI ????/span>
        </h1>
        <p class="hero-subtitle">鞎潔? Google Maps 擗輒???, AI 撟思?瘛勗漲?????隢?/p>

        <div class="input-group">
            <input
                type="url"
                id="urlInput"
                class="url-input"
                placeholder="鞎潔? Google Maps 擗輒???..."
                autocomplete="off"
            >
            <button id="analyzeBtn" class="btn-analyze" type="button">
                <span class="btn-text">????</span>
                <span class="btn-loader" aria-hidden="true"></span>
            </button>
        </div>
        <div class="model-toggle">
            <button class="model-btn active" data-model="gemini-3-flash-preview" id="modelFlash">
                ??敹恍芋撘?
            </button>
            <button class="model-btn" data-model="gemini-3-pro-preview" id="modelPro">
                ?? 摰璅∪?
            </button>
        </div>
        <p class="input-hint">?舀?澆?: google.com/maps/place/... ??maps.app.goo.gl/... ?剝??</p>
        <button id="demoBtn" class="btn-demo" type="button">?? 閰西岫蝭?嚗?瘜啗?靽∠儔摨?/button>

        <!-- Search History -->
        <div class="history-section" id="historySection" style="display:none;">
            <p class="history-label">?? ?餈???/p>
            <div class="history-tags" id="historyTags"></div>
        </div>
    </div>
</header>

<!-- ====== LOADING ====== -->
<section id="loadingSection" class="loading-section hidden">
    <div class="container">
        <div class="loading-card">
            <div class="loading-steps">
                <div class="loading-progress-bar">
                    <div class="loading-progress-fill" id="loadingProgressFill"></div>
                </div>
                <p class="loading-progress-text" id="loadingProgressText">皞?銝?..</p>
                <div class="step" id="step1">
                    <div class="step-icon">
                        <div class="spinner"></div>
                    </div>
                    <div class="step-info">
                        <p class="step-title" id="step1Title">甇???閰?...</p>
                        <p class="step-desc" id="step1Desc">?? Google Maps ??擗輒閰?鞈?</p>
                    </div>
                </div>
                <div class="step" id="step2">
                    <div class="step-icon">
                        <div class="spinner"></div>
                    </div>
                    <div class="step-info">
                        <p class="step-title" id="step2Title">AI 瘛勗漲??銝?..</p>
                        <p class="step-desc" id="step2Desc">雿輻 Gemini AI ?脰?憭雁摨西?隢???/p>
                    </div>
                </div>
                <div class="step" id="step3">
                    <div class="step-icon">
                        <div class="spinner"></div>
                    </div>
                    <div class="step-info">
                        <p class="step-title" id="step3Title">?Ｙ????勗?...</p>
                        <p class="step-desc" id="step3Desc">?渡?蝯?銝行?????/p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ====== SKELETON LOADING ====== -->
<section id="skeletonSection" class="hidden">
    <div class="container">
        <div class="skeleton-card">
            <div class="skeleton-line w60"></div>
            <div class="skeleton-line w40"></div>
            <div class="skeleton-circle"></div>
            <div class="skeleton-line w80"></div>
            <div class="skeleton-line w50"></div>
        </div>
        <div class="skeleton-row">
            <div class="skeleton-card small">
                <div class="skeleton-line w60"></div>
                <div class="skeleton-line w40"></div>
            </div>
            <div class="skeleton-card small">
                <div class="skeleton-line w60"></div>
                <div class="skeleton-line w40"></div>
            </div>
            <div class="skeleton-card small">
                <div class="skeleton-line w60"></div>
                <div class="skeleton-line w40"></div>
            </div>
            <div class="skeleton-card small">
                <div class="skeleton-line w60"></div>
                <div class="skeleton-line w40"></div>
            </div>
        </div>
    </div>
</section>

<!-- ====== ERROR ====== -->
<section id="errorSection" class="hidden">
    <div class="container">
        <div class="error-card">
            <span class="error-icon">?</span>
            <h2 id="errorTitle">??憭望?</h2>
            <p id="errorMessage">?潛??芰?航炊, 隢?敺?閰?</p>
            <div class="error-actions">
                <button class="btn-retry" id="retryBtn" onclick="retryAnalysis()">?? ???</button>
                <button class="btn-retry btn-retry-secondary" onclick="resetUI()">??餈??頛詨</button>
            </div>
        </div>
    </div>
</section>

<!-- ====== RESULTS ====== -->
<main id="resultsSection" class="hidden">

    <!-- SECTION 1: Restaurant Intro -->
    <section class="section-intro">
        <div class="container">
            <h2 class="restaurant-name" id="restaurantName">擗輒?迂</h2>
            <p class="review-count" id="reviewCount">撌脣???0 ??隢?/p>

            <!-- Radar Chart -->
            <div class="radar-card" id="radarCard">
                <canvas id="radarChart" width="300" height="300"></canvas>
            </div>

            <div class="intro-card">
                <h3 class="intro-title">?? 擗輒摰隞晶</h3>
                <p class="intro-text" id="restaurantIntro"></p>
            </div>
        </div>
    </section>

    <!-- SECTION 2: Dimensions -->
    <section class="section-overview-dims">
        <div class="container">
            <h2 class="section-title">?? ??閰?</h2>

            <!-- Top: 4 metric cards -->
            <div class="overview-grid">
                <div class="metrics-grid metrics-grid-full">
                    <div class="metric-card" data-color="coral">
                        <div class="metric-icon">??</div>
                        <div class="metric-score" id="tasteScore">0</div>
                        <div class="metric-label">??</div>
                    </div>
                    <div class="metric-card" data-color="gold">
                        <div class="metric-icon">??</div>
                        <div class="metric-score" id="serviceScore">0</div>
                        <div class="metric-label">??</div>
                    </div>
                    <div class="metric-card" data-color="mint">
                        <div class="metric-icon">??</div>
                        <div class="metric-score" id="envScore">0</div>
                        <div class="metric-label">?啣?</div>
                    </div>
                    <div class="metric-card" data-color="violet">
                        <div class="metric-icon">?</div>
                        <div class="metric-score" id="cpScore">0</div>
                        <div class="metric-label">CP??/div>
                    </div>
                </div>
            </div>

            <!-- Bottom: dimension detail tabs -->
            <div class="dims-detail">
                <div class="tabs">
                    <button class="tab active" data-tab="taste">?? ??</button>
                    <button class="tab" data-tab="service">?? ??</button>
                    <button class="tab" data-tab="environment">?? ?啣?</button>
                    <button class="tab" data-tab="value">? CP??/button>
                </div>

                <div class="tab-content active" id="tab-taste">
                    <div class="dim-score-bar">
                        <span class="dim-label">??閰?</span>
                        <div class="progress-bar"><div class="progress-fill" id="tasteProgress"></div></div>
                        <span class="dim-value" id="tasteVal">0</span>
                    </div>
                    <p class="dim-summary" id="tasteSummary"></p>
                    <div class="tags-group">
                        <div class="tags-row" id="tastePositive"></div>
                        <div class="tags-row" id="tasteNegative"></div>
                    </div>
                </div>

                <div class="tab-content" id="tab-service">
                    <div class="dim-score-bar">
                        <span class="dim-label">??閰?</span>
                        <div class="progress-bar"><div class="progress-fill" id="serviceProgress"></div></div>
                        <span class="dim-value" id="serviceVal">0</span>
                    </div>
                    <p class="dim-summary" id="serviceSummary"></p>
                    <div class="tags-group">
                        <div class="tags-row" id="servicePositive"></div>
                        <div class="tags-row" id="serviceNegative"></div>
                    </div>
                </div>

                <div class="tab-content" id="tab-environment">
                    <div class="dim-score-bar">
                        <span class="dim-label">?啣?閰?</span>
                        <div class="progress-bar"><div class="progress-fill" id="envProgress"></div></div>
                        <span class="dim-value" id="envVal">0</span>
                    </div>
                    <p class="dim-summary" id="envSummary"></p>
                    <div class="tags-group">
                        <div class="tags-row" id="envPositive"></div>
                        <div class="tags-row" id="envNegative"></div>
                    </div>
                </div>

                <div class="tab-content" id="tab-value">
                    <div class="dim-score-bar">
                        <span class="dim-label">CP?潸???/span>
                        <div class="progress-bar"><div class="progress-fill" id="valueProgress"></div></div>
                        <span class="dim-value" id="valueVal">0</span>
                    </div>
                    <p class="dim-summary" id="valueSummary"></p>
                    <p class="price-range" id="priceRange"></p>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 3: Fake Review Warning -->
    <section id="fakeReviewSection" class="section-fake hidden">
        <div class="container">
            <div class="fake-card" id="fakeCard">
                <div class="fake-header">
                    <span class="fake-icon">??</span>
                    <h3>?偌閰?霅衣內</h3>
                    <span class="fake-badge" id="fakeBadge">銝剖漲瘜冽?</span>
                </div>
                <div class="fake-stats">
                    <div class="fake-stat">
                        <span class="fake-stat-value" id="fakeCount">0</span>
                        <span class="fake-stat-label">?撮?偌</span>
                    </div>
                    <div class="fake-stat">
                        <span class="fake-stat-value" id="fakePercent">0%</span>
                        <span class="fake-stat-label">雿?</span>
                    </div>
                    <div class="fake-stat">
                        <span class="fake-stat-value" id="fakeTotal">0</span>
                        <span class="fake-stat-label">蝮質?隢?/span>
                    </div>
                </div>
                <div class="fake-reasons" id="fakeReasons"></div>
                <p class="fake-details" id="fakeDetails"></p>
                <!-- Activity Timeline -->
                <div class="fake-timeline" id="fakeTimeline"></div>
            </div>
        </div>
    </section>

    <!-- SECTION 4: Recommended Dishes -->
    <section class="section-dishes">
        <div class="container">
            <h2 class="section-title">?? ?刻?</h2>
            <div class="dishes-list" id="recommendedDishes"></div>
        </div>
    </section>

    <!-- SECTION 5: Food Photo Gallery -->
    <section id="foodPhotoSection" class="section-photos hidden">
        <div class="container">
            <h2 class="section-title">? 憌?抒?</h2>
            <div class="photo-gallery" id="photoGallery"></div>
        </div>
    </section>

    <!-- SECTION 6: Not Recommended Dishes -->
    <section class="section-dishes bad">
        <div class="container">
            <h2 class="section-title">?? 銝?西???/h2>
            <div class="dishes-list" id="notRecommendedDishes"></div>
        </div>
    </section>

    <!-- SECTION 7: Scene Recommendations -->
    <section class="section-scene" id="sceneSection" style="display:none;">
        <div class="container">
            <h2 class="section-title">? ?拙??湔</h2>
            <div class="scene-grid" id="sceneGrid"></div>
        </div>
    </section>

    <!-- SECTION 8: Best Visit Time -->
    <section class="section-visit-time" id="visitTimeSection" style="display:none;">
        <div class="container">
            <h2 class="section-title">?? ?雿喲赤?挾</h2>
            <p class="visit-time-summary" id="visitTimeSummary"></p>
            <div class="visit-time-grid" id="visitTimeGrid"></div>
        </div>
    </section>

    <!-- SECTION 9: Rating Trend -->
    <section class="section-trend" id="trendSection" style="display:none;">
        <div class="container">
            <h2 class="section-title">?? 閰?頞典</h2>
            <div class="trend-card">
                <div class="trend-header">
                    <span class="trend-badge" id="trendBadge">蝛拙?</span>
                    <p class="trend-summary" id="trendSummary"></p>
                </div>
                <canvas id="trendChart" width="500" height="250"></canvas>
            </div>
        </div>
    </section>

    <!-- Download / Share -->
    <section class="section-actions">
        <div class="container">
            <div class="action-buttons">
                <button class="btn-download" id="downloadBtn" onclick="downloadReport()">
                    ? 銝??勗???
                </button>
                <button class="btn-download btn-pdf" id="pdfBtn" onclick="downloadPDF()">
                    ?? 銝? PDF ?勗?
                </button>
                <button class="btn-share" id="copyBtn" onclick="copySummary()">
                    ?? 銴ˊ????
                </button>
            </div>
            <div class="social-share" id="socialShare">
                <span class="share-label">?澈?喉?</span>
                <button class="social-btn social-line" onclick="shareTo('line')" title="?澈??LINE">LINE</button>
                <button class="social-btn social-fb" onclick="shareTo('facebook')" title="?澈??Facebook">FB</button>
                <button class="social-btn social-x" onclick="shareTo('x')" title="?澈??X">??</button>
            </div>
        </div>
    </section>

</main>

<!-- Photo Lightbox -->
<div class="lightbox-overlay" id="lightboxOverlay" onclick="closeLightbox()">
    <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
    <img class="lightbox-img" id="lightboxImg" alt="憌?抒?" src="">
</div>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <p>Google Maps 擗輒閰? AI ????&copy; 2025</p>
        <p class="footer-sub">Powered by Apify &middot; Gemini AI</p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.2/dist/jspdf.umd.min.js"></script>
<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.getRegistrations().then(function (registrations) {
        registrations.forEach(function (registration) {
            registration.unregister();
        });
    }).catch(function () {});
}
</script>
<script src="/static/js/app.js?v=20260228"></script>
</body>
</html>
