<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Maps é¤å»³è©•è«– AI åˆ†æå™¨</title>
    <meta name="description" content="è²¼å…¥ Google Maps é¤å»³é€£çµ, AI è‡ªå‹•åˆ†æè©•è«–, æ¨è–¦èœè‰²ä¸€ç›®äº†ç„¶">
    <meta name="theme-color" content="#ffffff">

    <!-- PWA -->
    <link rel="manifest" href="/manifest.json?v=20260227">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ½ï¸</text></svg>">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/static/css/style.css?v=20260227">

    <!-- Critical inline styles as fallback while CSS loads -->
    <style>
        .hidden { display: none !important; }
        body { font-family: 'Noto Sans TC', sans-serif; margin: 0; padding: 0; }
    </style>
</head>
<body>

<!-- ====== HERO / INPUT ====== -->
<header class="hero">
    <div class="hero-bg"></div>
    <div class="container">
        <h1 class="hero-title">
            <span class="icon-plate">ğŸ½ï¸</span>
            Google Maps é¤å»³è©•è«–<br><span class="highlight">AI åˆ†æå™¨</span>
        </h1>
        <p class="hero-subtitle">è²¼ä¸Š Google Maps é¤å»³é€£çµ, AI å¹«ä½ æ·±åº¦åˆ†ææ‰€æœ‰è©•è«–</p>

        <div class="input-group">
            <input
                type="url"
                id="urlInput"
                class="url-input"
                placeholder="è²¼ä¸Š Google Maps é¤å»³é€£çµ..."
                autocomplete="off"
            >
            <button id="analyzeBtn" class="btn-analyze" type="button">
                <span class="btn-text">é–‹å§‹åˆ†æ</span>
                <span class="btn-loader" aria-hidden="true"></span>
            </button>
        </div>
        <div class="model-toggle">
            <button class="model-btn active" data-model="gemini-3-flash-preview" id="modelFlash">
                âš¡ å¿«é€Ÿæ¨¡å¼
            </button>
            <button class="model-btn" data-model="gemini-3-pro-preview" id="modelPro">
                ğŸ§  å®Œæ•´æ¨¡å¼
            </button>
        </div>
        <p class="input-hint">æ”¯æ´æ ¼å¼: google.com/maps/place/... æˆ– maps.app.goo.gl/... çŸ­é€£çµ</p>
        <button id="demoBtn" class="btn-demo" type="button">ğŸ“ è©¦è©¦ç¯„ä¾‹ï¼šé¼æ³°è±ä¿¡ç¾©åº—</button>
    </div>
</header>

<!-- ====== LOADING ====== -->
<section id="loadingSection" class="loading-section hidden">
    <div class="container">
        <div class="loading-card">
            <div class="loading-steps">
                <div class="loading-progress-bar">
                    <div class="loading-progress-fill" id="loadingProgressFill"></div>
                </div>
                <p class="loading-progress-text" id="loadingProgressText">æº–å‚™ä¸­...</p>
                <div class="step" id="step1">
                    <div class="step-icon">
                        <div class="spinner"></div>
                    </div>
                    <div class="step-info">
                        <p class="step-title" id="step1Title">æ­£åœ¨æŠ“å–è©•è«–...</p>
                        <p class="step-desc" id="step1Desc">é€£æ¥ Google Maps å–å¾—é¤å»³è©•è«–è³‡æ–™</p>
                    </div>
                </div>
                <div class="step" id="step2">
                    <div class="step-icon">
                        <div class="spinner"></div>
                    </div>
                    <div class="step-info">
                        <p class="step-title" id="step2Title">AI æ·±åº¦åˆ†æä¸­...</p>
                        <p class="step-desc" id="step2Desc">ä½¿ç”¨ Gemini AI é€²è¡Œå¤šç¶­åº¦è©•è«–åˆ†æ</p>
                    </div>
                </div>
                <div class="step" id="step3">
                    <div class="step-icon">
                        <div class="spinner"></div>
                    </div>
                    <div class="step-info">
                        <p class="step-title" id="step3Title">ç”¢ç”Ÿåˆ†æå ±å‘Š...</p>
                        <p class="step-desc" id="step3Desc">æ•´ç†çµæœä¸¦æ”¶é›†èœå“ç…§ç‰‡</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ====== SKELETON LOADING ====== -->
<section id="skeletonSection" class="hidden">
    <div class="container">
        <div class="skeleton-card">
            <div class="skeleton-line w60"></div>
            <div class="skeleton-line w40"></div>
            <div class="skeleton-circle"></div>
            <div class="skeleton-line w80"></div>
            <div class="skeleton-line w50"></div>
        </div>
        <div class="skeleton-row">
            <div class="skeleton-card small">
                <div class="skeleton-line w60"></div>
                <div class="skeleton-line w40"></div>
            </div>
            <div class="skeleton-card small">
                <div class="skeleton-line w60"></div>
                <div class="skeleton-line w40"></div>
            </div>
            <div class="skeleton-card small">
                <div class="skeleton-line w60"></div>
                <div class="skeleton-line w40"></div>
            </div>
            <div class="skeleton-card small">
                <div class="skeleton-line w60"></div>
                <div class="skeleton-line w40"></div>
            </div>
        </div>
    </div>
</section>

<!-- ====== ERROR ====== -->
<section id="errorSection" class="hidden">
    <div class="container">
        <div class="error-card">
            <span class="error-icon">ğŸ˜¥</span>
            <h2 id="errorTitle">åˆ†æå¤±æ•—</h2>
            <p id="errorMessage">ç™¼ç”ŸæœªçŸ¥éŒ¯èª¤, è«‹ç¨å¾Œå†è©¦.</p>
            <div class="error-actions">
                <button class="btn-retry" id="retryBtn" onclick="retryAnalysis()">ğŸ”„ é‡æ–°åˆ†æ</button>
                <button class="btn-retry btn-retry-secondary" onclick="resetUI()">â†© è¿”å›é‡æ–°è¼¸å…¥</button>
            </div>
        </div>
    </div>
</section>

<!-- ====== RESULTS ====== -->
<main id="resultsSection" class="hidden">

    <!-- SECTION 1: Restaurant Intro -->
    <section class="section-intro">
        <div class="container">
            <h2 class="restaurant-name" id="restaurantName">é¤å»³åç¨±</h2>
            <p class="review-count" id="reviewCount">å·²åˆ†æ 0 å‰‡è©•è«–</p>

            <!-- Radar Chart -->
            <div class="radar-card" id="radarCard">
                <canvas id="radarChart" width="300" height="300"></canvas>
            </div>

            <div class="intro-card">
                <h3 class="intro-title">ğŸ“– é¤å»³å®Œæ•´ä»‹ç´¹</h3>
                <p class="intro-text" id="restaurantIntro"></p>
            </div>
        </div>
    </section>

    <!-- SECTION 2: Dimensions -->
    <section class="section-overview-dims">
        <div class="container">
            <h2 class="section-title">ğŸ“Š å„é …è©•åˆ†</h2>

            <!-- Top: 4 metric cards -->
            <div class="overview-grid">
                <div class="metrics-grid metrics-grid-full">
                    <div class="metric-card" data-color="coral">
                        <div class="metric-icon">ğŸœ</div>
                        <div class="metric-score" id="tasteScore">0</div>
                        <div class="metric-label">å£å‘³</div>
                    </div>
                    <div class="metric-card" data-color="gold">
                        <div class="metric-icon">ğŸ™‹</div>
                        <div class="metric-score" id="serviceScore">0</div>
                        <div class="metric-label">æœå‹™</div>
                    </div>
                    <div class="metric-card" data-color="mint">
                        <div class="metric-icon">ğŸ </div>
                        <div class="metric-score" id="envScore">0</div>
                        <div class="metric-label">ç’°å¢ƒ</div>
                    </div>
                    <div class="metric-card" data-color="violet">
                        <div class="metric-icon">ğŸ’°</div>
                        <div class="metric-score" id="cpScore">0</div>
                        <div class="metric-label">CPå€¼</div>
                    </div>
                </div>
            </div>

            <!-- Bottom: dimension detail tabs -->
            <div class="dims-detail">
                <div class="tabs">
                    <button class="tab active" data-tab="taste">ğŸœ å£å‘³</button>
                    <button class="tab" data-tab="service">ğŸ™‹ æœå‹™</button>
                    <button class="tab" data-tab="environment">ğŸ  ç’°å¢ƒ</button>
                    <button class="tab" data-tab="value">ğŸ’° CPå€¼</button>
                </div>

                <div class="tab-content active" id="tab-taste">
                    <div class="dim-score-bar">
                        <span class="dim-label">å£å‘³è©•åˆ†</span>
                        <div class="progress-bar"><div class="progress-fill" id="tasteProgress"></div></div>
                        <span class="dim-value" id="tasteVal">0</span>
                    </div>
                    <p class="dim-summary" id="tasteSummary"></p>
                    <div class="tags-group">
                        <div class="tags-row" id="tastePositive"></div>
                        <div class="tags-row" id="tasteNegative"></div>
                    </div>
                </div>

                <div class="tab-content" id="tab-service">
                    <div class="dim-score-bar">
                        <span class="dim-label">æœå‹™è©•åˆ†</span>
                        <div class="progress-bar"><div class="progress-fill" id="serviceProgress"></div></div>
                        <span class="dim-value" id="serviceVal">0</span>
                    </div>
                    <p class="dim-summary" id="serviceSummary"></p>
                    <div class="tags-group">
                        <div class="tags-row" id="servicePositive"></div>
                        <div class="tags-row" id="serviceNegative"></div>
                    </div>
                </div>

                <div class="tab-content" id="tab-environment">
                    <div class="dim-score-bar">
                        <span class="dim-label">ç’°å¢ƒè©•åˆ†</span>
                        <div class="progress-bar"><div class="progress-fill" id="envProgress"></div></div>
                        <span class="dim-value" id="envVal">0</span>
                    </div>
                    <p class="dim-summary" id="envSummary"></p>
                    <div class="tags-group">
                        <div class="tags-row" id="envPositive"></div>
                        <div class="tags-row" id="envNegative"></div>
                    </div>
                </div>

                <div class="tab-content" id="tab-value">
                    <div class="dim-score-bar">
                        <span class="dim-label">CPå€¼è©•åˆ†</span>
                        <div class="progress-bar"><div class="progress-fill" id="valueProgress"></div></div>
                        <span class="dim-value" id="valueVal">0</span>
                    </div>
                    <p class="dim-summary" id="valueSummary"></p>
                    <p class="price-range" id="priceRange"></p>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 3: Fake Review Warning -->
    <section id="fakeReviewSection" class="section-fake hidden">
        <div class="container">
            <div class="fake-card" id="fakeCard">
                <div class="fake-header">
                    <span class="fake-icon">âš ï¸</span>
                    <h3>çŒæ°´è©•è«–è­¦ç¤º</h3>
                    <span class="fake-badge" id="fakeBadge">ä¸­åº¦æ³¨æ„</span>
                </div>
                <div class="fake-stats">
                    <div class="fake-stat">
                        <span class="fake-stat-value" id="fakeCount">0</span>
                        <span class="fake-stat-label">ç–‘ä¼¼çŒæ°´</span>
                    </div>
                    <div class="fake-stat">
                        <span class="fake-stat-value" id="fakePercent">0%</span>
                        <span class="fake-stat-label">ä½”æ¯”</span>
                    </div>
                    <div class="fake-stat">
                        <span class="fake-stat-value" id="fakeTotal">0</span>
                        <span class="fake-stat-label">ç¸½è©•è«–</span>
                    </div>
                </div>
                <div class="fake-reasons" id="fakeReasons"></div>
                <p class="fake-details" id="fakeDetails"></p>
                <!-- Activity Timeline -->
                <div class="fake-timeline" id="fakeTimeline"></div>
            </div>
        </div>
    </section>

    <!-- SECTION 4: Recommended Dishes -->
    <section class="section-dishes">
        <div class="container">
            <h2 class="section-title">ğŸ‘ æ¨è–¦èœè‰²</h2>
            <div class="dishes-list" id="recommendedDishes"></div>
        </div>
    </section>

    <!-- SECTION 5: Food Photo Gallery -->
    <section id="foodPhotoSection" class="section-photos hidden">
        <div class="container">
            <h2 class="section-title">ğŸ“¸ é£Ÿç‰©ç…§ç‰‡</h2>
            <div class="photo-gallery" id="photoGallery"></div>
        </div>
    </section>

    <!-- SECTION 6: Not Recommended Dishes -->
    <section class="section-dishes bad">
        <div class="container">
            <h2 class="section-title">ğŸ‘ ä¸æ¨è–¦èœè‰²</h2>
            <div class="dishes-list" id="notRecommendedDishes"></div>
        </div>
    </section>

    <!-- Download / Share -->
    <section class="section-actions">
        <div class="container">
            <button class="btn-download" id="downloadBtn" onclick="downloadReport()">
                ğŸ“¸ ä¸‹è¼‰åˆ†æå ±å‘Šåœ–ç‰‡
            </button>
        </div>
    </section>

</main>

<!-- Photo Lightbox -->
<div class="lightbox-overlay" id="lightboxOverlay" onclick="closeLightbox()">
    <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
    <img class="lightbox-img" id="lightboxImg" alt="é£Ÿç‰©ç…§ç‰‡" src="">
</div>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <p>Google Maps é¤å»³è©•è«– AI åˆ†æå™¨ &copy; 2025</p>
        <p class="footer-sub">Powered by Apify &middot; Gemini AI</p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.getRegistrations().then(function (registrations) {
        registrations.forEach(function (registration) {
            registration.unregister();
        });
    }).catch(function () {});
}
</script>
<script src="/static/js/app.js?v=20260227"></script>
</body>
</html>
